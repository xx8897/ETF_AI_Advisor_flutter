專案開發藍圖：ETF主題式智能理財顧問

 第一階段：地基與資料準備 (Phase 1: Foundation & Data)

 這個階段的目標是備妥我們AI所需的所有「知識原料」。

 定義核心ETF池：

 任務： 手動挑選20-30檔在台灣市場上具代表性、涵蓋不同主題的熱門ETF作為您系統的知識核心。

 範例：

 市值型：0050, 006208

 高股息：00878, 00929, 0056

 科技/半導體：00891, 00927, 00881

 ESG：00692

 債券型：00679B, 00772B

 產出： 一份ETF清單 (Excel或CSV)。

 建立靜態資料庫 (Static Knowledge Base)：

 任務： 針對清單中的每一檔ETF，蒐集其「不會頻繁變動」的靜態資料。

 需要欄位： ETF代號、ETF全名、追蹤指數、經理費、保管費、投資主題標籤(例如：高股息, ESG)、公開說明書連結。

 資料來源： 各投信公司官網（元大、國泰、富邦）、Goodinfo!台灣股市資訊網。

 產出： 一個結構化的檔案（例如 etf_static_data.csv）。這份文件是RAG系統的知識基石。

 建立動態資料來源 (Dynamic Data Source)：

 任務： 撰寫簡單的網路爬蟲，定期抓取會「變動」的數據。

 需要欄位： ETF代號、目前淨值、近一月/三月/一年績效、前十大成分股及其佔比、最新年化配息率。

 資料來源： cnyes鉅亨網、Yahoo!奇摩股市 等網站的ETF頁面。

 產出： 一個能每日更新的動態資料檔（例如 etf_dynamic_data.json）。

 第二階段：核心RAG引擎開發 (Phase 2: Core RAG Engine)

 目標是建立一個能「讀懂」我們資料的AI大腦。

 資料向量化 (Embedding)：

 任務： 將第一階段蒐集到的「靜態資料」和「動態資料」的文字部分（例如ETF的介紹、投資策略）進行切割(Chunking)，並使用Embedding模型（如OpenAI的 text-embedding-3-small）轉換為向量。

 工具： 使用 LangChain 或 LlamaIndex 框架來簡化這個流程。

 建立向量資料庫 (Vector Database)：

 任務： 將生成的向量存儲起來，以便快速檢索。

 工具： 建議從本地的 ChromaDB 或 FAISS 開始，對於此專案規模已綽綽有餘。

 開發檢索器 (Retriever)：

 任務： 建立一個函式，當輸入一個主題（例如：「我想找跟AI相關的ETF」）時，檢索器能從向量資料庫中，找出最相關的幾檔ETF的資訊。

 驗證： 這個階段要能獨立測試並驗證檢索的準確性。

 第三階段：智能推薦與報告生成 (Phase 3: Logic & Generation)

 這是專案最核心的智能部分。

 定義個人化輸入：

 任務： 設計一個簡單的方式讓使用者表達偏好。

 建議： 提供一個主題列表讓使用者複選，例如：[ ] 高股息 [ ] 科技創新 [ ] 環境永續(ESG) [ ] 穩健抗跌。

 開發推薦邏輯與提示工程 (Prompt Engineering)：

 任務： 這是整個專案的靈魂。你需要設計一個精巧的**提示(Prompt)**來指揮大型語言模型(LLM)。

 流程：

 a.  接收使用者勾選的主題。

 b.  使用第二階段開發的檢索器，找出符合這些主題的ETF候選清單及其詳細資料。

 c.  將使用者需求、檢索到的ETF資料、以及您預設的報告範本格式，全部組合進一個巨大的Prompt中。

 d.  發送給GPT-4o等強大的雲端LLM。

 Prompt範例精華： 「你是一位專業的ETF投資顧問。使用者希望建立一個兼具『高股息』和『科技創新』的投資組合。根據以下我提供的資料庫資訊[此處插入檢索到的ETF資料]，請為他推薦2-3檔ETF的組合，並說明各檔ETF的配置比例(總和100%)與推薦原因。最後，請嚴格按照我指定的JSON格式輸出你的分析報告...」

 設計報告生成模組：

 任務： 讓LLM回傳結構化的JSON，而不是一段文字。這個JSON將包含報告所需的所有元素（文字說明、推薦標的、配置比例、圖表數據等）。

 圖表生成： 您的後端程式接收到JSON後，根據其中的chart_data部分，使用 Matplotlib 或 Plotly 等函式庫來動態生成圓餅圖或長條圖。

 第四階段：前端介面與整合 (Phase 4: Interface & Integration)

 目標是讓使用者能實際操作您的系統。

 建立使用者介面 (UI)：

 工具： 強烈推薦使用 Streamlit。它能讓您用純Python快速打造出一個具備互動功能的網頁應用。

 設計介面流程：

 頁面一： 歡迎頁面，以及讓使用者勾選投資主題的區塊。

 頁面二： 按下「生成分析報告」按鈕後，顯示處理中動畫。

 頁面三： 呈現由後端生成、圖文並茂的完整分析報告。
