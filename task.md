# 專案開發藍圖：ETF 智能理財顧問 (Flutter 全面改造版)

**專案目標**：打造一個基於 Google 技術棧 (Dart + Flutter) 的、擁有原生級體驗的跨平台 ETF 智能理財應用。

---
## 專案設定 (Project Settings)

*   **GitHub Repo**: `https://github.com/xx8897/ETF_AI_Advisor_flutter.git`

---
### **第一階段至第三階段：基礎建設**

*   **狀態**: ✅ **已完成**
*   **摘要**: 已完成資料準備、後端重建、以及 Flutter 前端 v1.0 的開發與對接。

---
### **第四階段：功能增強 (v1.5)**

*   **狀態**: ✅ **已完成**
*   **任務**:
    *   **圖表視覺化**: 已在分析報告中，新增圓餅圖來視覺化資產配置比例。

---
### **第五階段：核心功能進化 (v2.0)**

*   **狀態**: 🚧 **進行中**
*   **目標**: 根據使用者提出的深度需求，將應用從「建議工具」進化為「個人化智能理財平台」。
*   **核心任務**:
    1.  **整合至單一資料來源**:
        *   **狀態**: ✅ **已完成**
        *   **摘要**: 專案的所有資料來源，最終由使用者提供一個單一、完整的 `etf.xlsx` 檔案所取代。先前所有關於 API 探勘與網頁爬蟲的任務均已作廢。我們已成功基於此「精華資料版本」建立了最終的向量資料庫。
    2.  **實作詳細持股視圖**:
        *   **狀態**: ✅ **已完成**
        *   **摘要**: 成功在 Dart 後端建立了可提供單一 ETF 詳細資訊的 API。Flutter 前端已能串接此 API，並在一個圖文並茂的、互動式的對話框中，為使用者呈現包含**主要持股/持債分佈圓餅圖**（含「其他」類別與債券特殊處理邏輯）以及一份由金融顧問策劃的**關鍵指標表格**。根據使用者最終決策，原計畫的「行業類別圓餅圖」已被移除，以確保介面簡潔專注。
    3.  **開發投資組合整體持股分析**:
        *   **狀態**: ✅ **已完成**
        *   **摘要**: 成功在 Dart 後端建立了新的 `/portfolio_holdings` API，可接收投資組合並即時計算加權後的合併持股。Flutter 前端已完成對接，能在報告頁面中，透過一個可展開的視圖，向使用者清晰地展示其投資組合在底層持股的最終分佈情況。
    5.  **打造進階 AI 分析與對話式調整**:
        *   **任務**: 擺脫目前固定推薦 3 檔 ETF 的限制，讓 AI 能根據分析提供更多元、更完善的投資組合。
        *   **任務**: 新增一個**對話式介面**，允許使用者對初步建議進行微調。
        *   **規格**: 使用者可以明確提出指令，例如：「加入 00878」、「排除所有債券型 ETF」、「我希望台積電的整體佔比再高一點」。
    6.  **引入使用者自訂主題權重**:
        *   **任務**: 在主題選擇階段，允許使用者不僅是單選，而是可以為多個感興趣的主題**分配投資比例** (例如：高股息 60%, 半導體 40%)。
    7.  **新增風險承受度評估**:
        *   **任務**: 讓使用者可以輸入或選擇自身的**風險指數** (例如：保守型、穩健型、積極型)。
        *   **規格**: AI 需將此風險指數作為核心參數，用以推薦不同主題之間的資金配置比例，以及最終的 ETF 組合。

---
### **第六階段：打包與交付**

*   **狀態**: ⏳ **待開始**
*   **目標**: 将应用程式打包成易于分发和部署的格式。
*   **任务**:
    *   **未来任务**: 将 Flutter 应用打包成独立的 Windows `.exe` 桌面应用程式。
    *   **未来任务**: 将 Flutter 应用打包成可以被部署到网页伺服器的 Web 版本。
    *   **未来任务**: (可选) 将 Dart 后端和 ChromaDB 伺服器，容器化 (Dockerize) 并部署到云端平台。